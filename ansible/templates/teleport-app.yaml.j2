version: v3
teleport:
  proxy_server: {{ teleport_cluster_domain }}:443

  join_params:
    method: iam
    token_name: {{ teleport_token_iam }}

  log:
    severity: INFO
    output: stderr

# Disable all services except app_service
auth_service:
  enabled: false

proxy_service:
  enabled: false

ssh_service:
  enabled: false

# Enable only the Application Service
app_service:
  enabled: true
  apps:
  - name: quotes
    # Connect to quotes container via Docker network or localhost
    uri: http://quotes-api:3000
    labels:
      env: demo
      type: api
      deployed: local-docker
    # Optional: enable application rewriting if needed
    rewrite:
      headers:
      - name: X-Forwarded-By
        value: teleport-app-service
